{"ast":null,"code":"var _jsxFileName = \"/Users/anastasia/Documents/Work/project2.0/front3.0/src/components/FormReg.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst FormReg = () => {\n  _s();\n\n  const url = 'http://localhost:8000';\n  const {\n    handleSubmit,\n    register,\n    getValues,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const [login, setLogin] = useState();\n  const [password, setPassword] = useState();\n  const [repPassword, setRepPassword] = useState();\n  const [userDef, setUserDef] = useState(false);\n  const history = useHistory();\n\n  const createNewUser = async data => {\n    await axios.post(`${url}/saveUser`, {\n      login: data.login,\n      password: data.password\n    }).then(res => {\n      Cookies.set('token', res.data.token);\n      Cookies.set('id', res.data.id);\n      history.push('/appointments');\n    }).catch(e => {\n      if (e.response.status === 402) {\n        userNotDef();\n      }\n    });\n  };\n\n  const userNotDef = () => {\n    setUserDef(true);\n    setTimeout(() => {\n      setUserDef(false);\n    }, 4000);\n  };\n\n  const setAuto = () => {\n    history.push('/autorization');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(data => createNewUser(data)),\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Login:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: login,\n        onChange: e => setLogin(e.target.value),\n        placeholder: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Repeat password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: repPassword,\n        onChange: e => setRepPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setAuto(),\n        children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), userDef ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0441 \\u0442\\u0430\\u043A\\u0438\\u043C \\u043B\\u043E\\u0433\\u0438\\u043D\\u043E\\u043C \\u0443\\u0436\\u0435 \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(FormReg, \"eCMCcFguFsIGxA/zoHhf2WmW27g=\", false, function () {\n  return [useForm, useHistory];\n});\n\n_c = FormReg;\nexport default FormReg;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormReg\");","map":{"version":3,"sources":["/Users/anastasia/Documents/Work/project2.0/front3.0/src/components/FormReg.jsx"],"names":["React","useState","useHistory","axios","useForm","Cookies","FormReg","url","handleSubmit","register","getValues","formState","errors","login","setLogin","password","setPassword","repPassword","setRepPassword","userDef","setUserDef","history","createNewUser","data","post","then","res","set","token","id","push","catch","e","response","status","userNotDef","setTimeout","setAuto","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport Cookies from 'js-cookie';\n\nconst FormReg = () => {\n\n    const url = 'http://localhost:8000';\n\n    const { handleSubmit, register, getValues, formState: { errors } } = useForm();\n\n    const [login, setLogin] = useState();\n    const [password, setPassword] = useState();\n    const [repPassword, setRepPassword] = useState();\n    const [userDef, setUserDef] = useState(false);\n\n    const history = useHistory(); \n\n    const createNewUser = async (data) => {\n        await axios.post(`${url}/saveUser`, {\n            login: data.login,\n            password: data.password,\n        }).then(res => {\n          Cookies.set('token', res.data.token)\n          Cookies.set('id', res.data.id)\n          history.push('/appointments');\n        }).catch((e) => {\n            if (e.response.status === 402) {\n                userNotDef()\n            }\n        })\n    }\n\n    const userNotDef = () => {\n        setUserDef(true)\n        setTimeout(() => {\n            setUserDef(false)\n        },4000)\n    }\n\n    const setAuto = () => {\n        history.push('/autorization')\n    }\n\n    return (\n        <>\n\n        <form onSubmit={handleSubmit((data) => createNewUser(data))} >\n            <h2>Регистрация</h2>\n\n            <label>Login:</label>\n            <input \n                type=\"text\" \n                value={login} \n                onChange={(e) => setLogin(e.target.value)} \n                placeholder=\"Login\"\n            />\n\n            <label>Password:</label>\n            <input \n                type=\"password\" \n                value={password} \n                onChange={(e) => setPassword(e.target.value)} \n            />\n\n            <label>Repeat password:</label>\n            <input \n                type=\"password\" \n                value={repPassword} \n                onChange={(e) => setRepPassword(e.target.value)} \n            />\n\n            <button type=\"submit\">Зарегистрироваться</button>\n            <button onClick={() => setAuto()}>Авторизоваться</button>\n\n            {userDef ? (\n              <div>Пользователь с таким логином уже существует!</div>\n            ) : null}\n        </form>\n            \n        </>\n    )\n}\n\nexport default FormReg;\n"]},"metadata":{},"sourceType":"module"}