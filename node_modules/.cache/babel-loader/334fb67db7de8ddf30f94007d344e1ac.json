{"ast":null,"code":"var _jsxFileName = \"/Users/anastasia/Documents/Work/project2.0/front3.0/src/components/FormReg.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst FormReg = () => {\n  _s();\n\n  const url = 'http://localhost:8000';\n  const {\n    handleSubmit,\n    register,\n    getValues,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const [login, setLogin] = useState();\n  const [password, setPassword] = useState();\n  const [userDef, setUserDef] = useState(false);\n  const history = useHistory();\n\n  const createNewUser = async data => {\n    await axios.post(`${url}/saveUser`, {\n      login: data.login,\n      password: data.password\n    }).then(res => {\n      Cookies.set('token', res.data.token);\n      Cookies.set('id', res.data.id);\n      history.push('/appointments');\n    }).catch(e => {\n      if (e.response.status === 402) {\n        userNotDef();\n      }\n    });\n  };\n\n  const userNotDef = () => {\n    setUserDef(true);\n    setTimeout(() => {\n      setUserDef(false);\n    }, 4000);\n  };\n\n  const setAuto = () => {\n    history.push('/autorization');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(data => createNewUser(data)),\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Login:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: login,\n        onChange: e => setLogin(e.target.value),\n        placeholder: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        placeholder: \"Password\",\n        ...register(\"password\", {\n          required: true,\n          minLength: {\n            value: 6\n          },\n          pattern: /[A-Za-z].*\\d|\\d.*[A-Za-z]/\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this), errors.password && errors.password.type === \"required\" && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u041E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E \\u0434\\u043B\\u044F \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u0438\\u044F!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 72\n      }, this), errors.password && errors.password.type === \"minLength\" && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u041C\\u0438\\u043D\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432 6!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 73\n      }, this), errors.password && errors.password.type === \"pattern\" && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u043B\\u0430\\u0442\\u0438\\u043D\\u0441\\u043A\\u0438\\u0435 \\u0431\\u0443\\u043A\\u0432\\u044B/\\u043D\\u0435\\u0442 \\u0446\\u0438\\u0444\\u0440\\u044B!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 71\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Repeat password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: password,\n        placeholder: \"Password\",\n        ...register(\"passwordExem\", {\n          required: true,\n          minLength: {\n            value: 6\n          },\n          validate: {\n            matchesPreviousPassword: value => {\n              const {\n                password\n              } = getValues();\n              return password === value || \"не\";\n            }\n          },\n          pattern: /[A-Za-z].*\\d|\\d.*[A-Za-z]/\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), errors.passwordExem && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: errors.passwordExem.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 38\n      }, this), errors.passwordExem && errors.passwordExem.type === \"required\" && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u041E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E \\u0434\\u043B\\u044F \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u0438\\u044F!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 80\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setAuto(),\n        children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this), userDef ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0441 \\u0442\\u0430\\u043A\\u0438\\u043C \\u043B\\u043E\\u0433\\u0438\\u043D\\u043E\\u043C \\u0443\\u0436\\u0435 \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(FormReg, \"KrH+FfmXM7stdP3vjl2KryGg9U8=\", false, function () {\n  return [useForm, useHistory];\n});\n\n_c = FormReg;\nexport default FormReg;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormReg\");","map":{"version":3,"sources":["/Users/anastasia/Documents/Work/project2.0/front3.0/src/components/FormReg.jsx"],"names":["React","useState","useHistory","axios","useForm","Cookies","FormReg","url","handleSubmit","register","getValues","formState","errors","login","setLogin","password","setPassword","userDef","setUserDef","history","createNewUser","data","post","then","res","set","token","id","push","catch","e","response","status","userNotDef","setTimeout","setAuto","target","value","required","minLength","pattern","type","validate","matchesPreviousPassword","passwordExem","message"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { useForm } from \"react-hook-form\";\nimport Cookies from 'js-cookie';\n\nconst FormReg = () => {\n\n    const url = 'http://localhost:8000';\n\n    const { handleSubmit, register, getValues, formState: { errors } } = useForm();\n\n    const [login, setLogin] = useState();\n    const [password, setPassword] = useState();\n    const [userDef, setUserDef] = useState(false);\n\n    const history = useHistory(); \n\n    const createNewUser = async (data) => {\n        await axios.post(`${url}/saveUser`, {\n            login: data.login,\n            password: data.password,\n        }).then(res => {\n          Cookies.set('token', res.data.token)\n          Cookies.set('id', res.data.id)\n          history.push('/appointments');\n        }).catch((e) => {\n            if (e.response.status === 402) {\n                userNotDef()\n            }\n        })\n    }\n\n    const userNotDef = () => {\n        setUserDef(true)\n        setTimeout(() => {\n            setUserDef(false)\n        },4000)\n    }\n\n    const setAuto = () => {\n        history.push('/autorization')\n    }\n\n    return (\n        <>\n\n        <form onSubmit={handleSubmit((data) => createNewUser(data))} >\n            <h2>Регистрация</h2>\n\n            <label>Login:</label>\n            <input \n                type=\"text\" \n                value={login} \n                onChange={(e) => setLogin(e.target.value)} \n                placeholder=\"Login\"\n            />\n\n            <label>Password:</label>\n            <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\"{...register(\"password\", { required: true, minLength : {value: 6}, pattern: /[A-Za-z].*\\d|\\d.*[A-Za-z]/})}/>\n            {errors.password && errors.password.type === \"required\" && <span>Обязательно для заполнения!</span>}\n            {errors.password && errors.password.type === \"minLength\" && <span>Минимальное количество символов 6!</span>}\n            {errors.password && errors.password.type === \"pattern\" && <span>Только латинские буквы/нет цифры!</span>}\n\n            <label>Repeat password:</label>\n            <input type=\"password\" value={password} placeholder=\"Password\"{...register(\"passwordExem\", { required: true, minLength : {value: 6}, validate: {\n                matchesPreviousPassword: (value) => {\n                    const { password } = getValues();\n                return password === value || \"не\";\n                }\n            }, pattern: /[A-Za-z].*\\d|\\d.*[A-Za-z]/})}/>\n            {errors.passwordExem && (<span>{errors.passwordExem.message}</span>)}\n            {errors.passwordExem && errors.passwordExem.type === \"required\" && <span>Обязательно для заполнения!</span>}\n\n            <button type=\"submit\">Зарегистрироваться</button>\n            <button onClick={() => setAuto()}>Авторизоваться</button>\n\n            {userDef ? (\n              <div>Пользователь с таким логином уже существует!</div>\n            ) : null}\n        </form>\n            \n        </>\n    )\n}\n\nexport default FormReg;\n"]},"metadata":{},"sourceType":"module"}